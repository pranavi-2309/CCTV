<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Test Login - Clinic Tracker</title>
  <style>
    body{font-family:Segoe UI,Arial,sans-serif;background:#f7f9fc;color:#222;padding:24px}
    .card{max-width:520px;margin:32px auto;padding:18px;border-radius:8px;background:#fff;box-shadow:0 6px 18px rgba(20,30,60,0.06)}
    label{display:block;margin-top:10px;font-size:14px}
    input,select{width:100%;padding:8px;margin-top:6px;border:1px solid #d7dbe0;border-radius:6px}
    button{margin-top:12px;padding:10px 14px;border:0;background:#0b5fff;color:#fff;border-radius:6px;cursor:pointer}
    pre{background:#f1f5ff;border:1px solid #e6ecff;padding:12px;border-radius:6px;overflow:auto}
    small.note{color:#666}
  </style>
</head>
<body>
  <div class="card">
    <h2>Test Login (browser)</h2>
    <p class="note">This page sends a JSON POST to <code>/api/auth/login</code> on the backend (port 8080).
    Use it instead of opening the POST URL directly which causes a 405 Whitelabel page.</p>

    <form id="loginForm">
      <label for="email">Email</label>
      <input id="email" name="email" type="email" placeholder="admin@klh.edu.in" value="admin@klh.edu.in" required />

      <label for="password">Password</label>
      <input id="password" name="password" type="password" placeholder="admin123" value="admin123" required />

      <label for="role">Role</label>
      <select id="role" name="role">
        <option value="admin">admin</option>
        <option value="hod">hod</option>
        <option value="faculty">faculty</option>
        <option value="clinic">clinic</option>
        <option value="student">student</option>
      </select>

      <button type="submit">Send Login</button>
    </form>

    <h3>Result</h3>
    <pre id="result">(no request yet)</pre>
  </div>

  <script>
    const form = document.getElementById('loginForm');
    const result = document.getElementById('result');
    form.addEventListener('submit', async (ev) => {
      ev.preventDefault();
      result.textContent = 'Sending...';
      const payload = {
        email: document.getElementById('email').value,
        password: document.getElementById('password').value,
        role: document.getElementById('role').value
      };

      try {
        const res = await fetch('http://localhost:8080/api/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
          credentials: 'omit'
        });
        const txt = await res.text();
        result.textContent = `HTTP ${res.status} ${res.statusText}\n\n${txt}`;
      } catch (err) {
        result.textContent = 'Request failed: ' + err.message;
      }
    });
  </script>
</body>
</html>
